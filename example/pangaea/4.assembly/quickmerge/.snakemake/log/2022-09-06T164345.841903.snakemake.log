Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 100
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	circularize_final
	1	extract_bigtigs
	1	faidx
	4

[Tue Sep  6 16:43:46 2022]
localrule faidx:
    input: merged_out.fasta
    output: merged_out.fasta.fai
    jobid: 2
    wildcards: something=merged_out, asta=asta

[Tue Sep  6 16:43:47 2022]
Finished job 2.
1 of 4 steps (25%) done

[Tue Sep  6 16:43:47 2022]
localcheckpoint extract_bigtigs:
    input: merged_out.fasta, merged_out.fasta.fai
    output: circular/3.circularization/1.candidate_genomes/
    jobid: 3
    wildcards: sample=circular
Downstream jobs will be updated after completion.

Updating job 1.
[Tue Sep  6 16:43:47 2022]
Finished job 3.
2 of 3 steps (67%) done

[Tue Sep  6 16:43:47 2022]
localrule circularize_final:
    input: merged_out.fasta, merged_out.fasta.fai
    output: circular/3.circularization/4.circular_circularized.fasta
    jobid: 4
    wildcards: sample=circular

[Tue Sep  6 16:43:47 2022]
Error in rule circularize_final:
    jobid: 4
    output: circular/3.circularization/4.circular_circularized.fasta
    shell:
        
		find circular/3.circularization/3.circular_sequences/sh/ -type f | xargs cat | bash
		ls circular/3.circularization/3.circular_sequences/ | grep .fa$ | cut -f1-2 -d '_' > circs.tmp || true
		(cat merged_out.fasta.fai | grep -vf circs.tmp |
		cut -f1 | xargs samtools faidx merged_out.fasta; ls circular/3.circularization/3.circular_sequences/* | grep .fa$ | xargs cat) |
		tr -d '\n' | sed 's/\(>[contigscaffold_]*[0-9]*\)/\n\1\n/g' | fold -w 120 | cut -f1 -d ':' | grep -v '^$' > circular/3.circularization/4.circular_circularized.fasta || true
		rm circs.tmp
		
        (exited with non-zero exit code)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /home/comp/zmzhang/stlfr/hlj/example/pangaea/4.assembly/quickmerge/.snakemake/log/2022-09-06T164345.841903.snakemake.log
